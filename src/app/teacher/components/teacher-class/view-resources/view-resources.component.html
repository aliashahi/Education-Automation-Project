<nz-tabset class="m-2">
  <nz-tab nzTitle="RESOURCE">
    <ng-container *ngIf="filesList.length != 0; else noData">
      <nz-collapse class="m-4">
        <ng-container *ngFor="let file of filesList">
          <nz-collapse-panel [nzExtra]="extraTpl" [nzHeader]="file.title">
            <p style="margin: 0; overflow: hidden; overflow-y: scroll">
              {{ file.description }}
            </p>
          </nz-collapse-panel>
          <ng-template #extraTpl>
            <i
              nz-icon
              nzType="download"
              nzTheme="outline"
              (click)="onDownload(imageBaseUrl + file.file)"
            ></i>
            <i
              class="mx-4 text-red-600"
              nz-icon
              nzType="delete"
              nzTheme="outline"
              (click)="onDelete(file.id)"
            ></i>
          </ng-template>
        </ng-container>
      </nz-collapse>
    </ng-container>
    <ng-template #noData>
      <nz-empty></nz-empty>
    </ng-template>
  </nz-tab>
  <nz-tab nzTitle="CREATE NEW RESOURCE">
    <div
      class="
        w-[100%
        -
        40px]
        flex
        items-center
        rounded-lg
        bg-gray-100
        p-2
        m-5
        border-[1px] border-solid border-gray-600
      "
    >
      <div class="flex-1">
        <mat-form-field class="w-full" appearance="outline">
          <mat-label>Title</mat-label>
          <input matInput [(ngModel)]="title" required [disabled]="pending" />
        </mat-form-field>
        <mat-form-field class="w-full" appearance="outline">
          <textarea
            matInput
            [disabled]="pending"
            [(ngModel)]="desc"
            placeholder="description "
            rows="15"
          ></textarea>
        </mat-form-field>
        <div class="getImage w-[100% - 1rem] m-2">
          <div
            class="
              dragField
              p-2
              rounded-lg
              w-full
              h-full
              flex
              justify-center
              items-center
              border-dotted border-2 border-gray-400
            "
            [ngClass]="{ 'bg-green-50': file }"
            (click)="input.click()"
            (fileDropped)="upload($event, 1)"
            DragDropFileUpload
          >
            <span class="block text-center pe-auto">
              <h2>
                {{
                  !file
                    ? "choose a file to upload"
                    : "file Added :" + (file?.name ?? "")
                }}
              </h2>
              <h6>(you can also drag and drop)</h6>
              <button
                *ngIf="file"
                mat-icon-button
                (click)="$event.stopPropagation(); file = undefined"
              >
                <mat-icon class="cursor-pointer hover:scale-[0.1]"
                  >close
                </mat-icon>
              </button>
            </span>
          </div>
          <input
            class="inputField"
            #input
            (change)="upload($event, 2)"
            type="file"
          />
        </div>
        <div class="flex w-full">
          <button
            class="btn btn-primary ml-auto"
            [disabled]="!file || !title || pending"
            (click)="onSubmit()"
          >
            Add Resource
          </button>
        </div>
      </div>
    </div>
  </nz-tab>
</nz-tabset>
